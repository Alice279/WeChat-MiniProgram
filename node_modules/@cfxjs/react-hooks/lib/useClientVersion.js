"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useClientVersion;

var _ = require("./");

var _react = require("react");

const GET_CLIENT_VERSION_SWR_ID = "GET_CLIENT_VERSION_SWR_ID";

function useClientVersion() {
  const confluxJSDefined = (0, _.useConfluxJSDefined)();
  const {
    data: clientVersion,
    error: getClientVersionError,
    mutate
  } = (0, _.useSWR)(confluxJSDefined ? GET_CLIENT_VERSION_SWR_ID : null, () => {
    var _window, _window$confluxJS, _window$confluxJS$pro, _window2, _window2$confluxJS, _window2$confluxJS$pr, _window3, _window3$confluxJS, _window3$confluxJS$pr;

    if (typeof ((_window = window) === null || _window === void 0 ? void 0 : (_window$confluxJS = _window.confluxJS) === null || _window$confluxJS === void 0 ? void 0 : (_window$confluxJS$pro = _window$confluxJS.provider) === null || _window$confluxJS$pro === void 0 ? void 0 : _window$confluxJS$pro.send) === "function") return (_window2 = window) === null || _window2 === void 0 ? void 0 : (_window2$confluxJS = _window2.confluxJS) === null || _window2$confluxJS === void 0 ? void 0 : (_window2$confluxJS$pr = _window2$confluxJS.provider) === null || _window2$confluxJS$pr === void 0 ? void 0 : _window2$confluxJS$pr.send("cfx_clientVersion", []);
    return (_window3 = window) === null || _window3 === void 0 ? void 0 : (_window3$confluxJS = _window3.confluxJS) === null || _window3$confluxJS === void 0 ? void 0 : (_window3$confluxJS$pr = _window3$confluxJS.provider) === null || _window3$confluxJS$pr === void 0 ? void 0 : _window3$confluxJS$pr.call("cfx_clientVersion");
  });
  (0, _react.useEffect)(() => {
    if (confluxJSDefined) mutate();
  }, [confluxJSDefined]);
  if (getClientVersionError) console.error(`Error get clientVersion: ${getClientVersionError === null || getClientVersionError === void 0 ? void 0 : getClientVersionError.message}`);
  return clientVersion;
}
//# sourceMappingURL=useClientVersion.js.map
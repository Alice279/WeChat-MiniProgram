"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useIdleSWR;
exports.useEpochNumberSWR = useEpochNumberSWR;

var _swr = _interopRequireDefault(require("swr"));

var _reactUse = require("react-use");

var _ = require("./");

var _react = require("react");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function useIdleSWR(...args) {
  const [key, ...rest] = args;
  let idleDelay = 300e3;
  if (args[1] && args[1].idleDelay) idleDelay = args[1].idleDelay;
  if (args[2] && args[2].idleDelay) idleDelay = args[2].idleDelay;
  return (0, _swr.default)((0, _reactUse.useIdle)(idleDelay) ? null : key, ...rest);
}

function useEpochNumberSWR(...args) {
  const confluxJSDefined = (0, _.useConfluxJSDefined)();
  const [key, ...rest] = args;
  const swrRst = useIdleSWR(confluxJSDefined ? key : null, ...rest);
  (0, _react.useEffect)(() => {
    swrRst.mutate();
  }, [confluxJSDefined]);
  (0, _reactUse.useEvent)("epochNumberUpdated", () => swrRst.mutate());
  return swrRst;
}
//# sourceMappingURL=swr.js.map
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useClientVersion;\n\nvar _ = require(\"./\");\n\nvar _react = require(\"react\");\n\nconst GET_CLIENT_VERSION_SWR_ID = \"GET_CLIENT_VERSION_SWR_ID\";\n\nfunction useClientVersion() {\n  const confluxJSDefined = (0, _.useConfluxJSDefined)();\n  const {\n    data: clientVersion,\n    error: getClientVersionError,\n    mutate\n  } = (0, _.useSWR)(confluxJSDefined ? GET_CLIENT_VERSION_SWR_ID : null, () => {\n    var _window, _window$confluxJS, _window$confluxJS$pro, _window2, _window2$confluxJS, _window2$confluxJS$pr, _window3, _window3$confluxJS, _window3$confluxJS$pr;\n\n    if (typeof ((_window = window) === null || _window === void 0 ? void 0 : (_window$confluxJS = _window.confluxJS) === null || _window$confluxJS === void 0 ? void 0 : (_window$confluxJS$pro = _window$confluxJS.provider) === null || _window$confluxJS$pro === void 0 ? void 0 : _window$confluxJS$pro.send) === \"function\") return (_window2 = window) === null || _window2 === void 0 ? void 0 : (_window2$confluxJS = _window2.confluxJS) === null || _window2$confluxJS === void 0 ? void 0 : (_window2$confluxJS$pr = _window2$confluxJS.provider) === null || _window2$confluxJS$pr === void 0 ? void 0 : _window2$confluxJS$pr.send(\"cfx_clientVersion\", []);\n    return (_window3 = window) === null || _window3 === void 0 ? void 0 : (_window3$confluxJS = _window3.confluxJS) === null || _window3$confluxJS === void 0 ? void 0 : (_window3$confluxJS$pr = _window3$confluxJS.provider) === null || _window3$confluxJS$pr === void 0 ? void 0 : _window3$confluxJS$pr.call(\"cfx_clientVersion\");\n  });\n  (0, _react.useEffect)(() => {\n    if (confluxJSDefined) mutate();\n  }, [confluxJSDefined]);\n  if (getClientVersionError) console.error(`Error get clientVersion: ${getClientVersionError === null || getClientVersionError === void 0 ? void 0 : getClientVersionError.message}`);\n  return clientVersion;\n}","map":{"version":3,"sources":["../src/useClientVersion.js"],"names":["GET_CLIENT_VERSION_SWR_ID","confluxJSDefined","data","error","mutate","window","console","getClientVersionError","message"],"mappings":";;;;;;;AAAA,IAAA,CAAA,GAAA,OAAA,CAAA,IAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AAEA,MAAMA,yBAAyB,GAA/B,2BAAA;;AAEe,SAAA,gBAAA,GAA4B;AACzC,QAAMC,gBAAgB,GAAG,CAAA,GAAA,CAAA,CAAzB,mBAAyB,GAAzB;AAEA,QAAM;AAAEC,IAAAA,IAAI,EAAN,aAAA;AAAuBC,IAAAA,KAAK,EAA5B,qBAAA;AAAqDC,IAAAA;AAArD,MAAgE,CAAA,GAAA,CAAA,CAAA,MAAA,EACpEH,gBAAgB,GAAA,yBAAA,GADoD,IAAA,EAEpE,MAAM;AAAA,QAAA,OAAA,EAAA,iBAAA,EAAA,qBAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,qBAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,qBAAA;;AACJ,QAAI,QAAA,CAAA,OAAA,GAAA,MAAA,MAAA,IAAA,IAAA,OAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,iBAAA,GAAOI,OAAAA,CAAP,SAAA,MAAA,IAAA,IAAA,iBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,qBAAA,GAAOA,iBAAAA,CAAP,QAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAOA,qBAAAA,CAAP,IAAA,MAAJ,UAAA,EACE,OAAA,CAAA,QAAA,GAAA,MAAA,MAAA,IAAA,IAAA,QAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,kBAAA,GAAOA,QAAAA,CAAP,SAAA,MAAA,IAAA,IAAA,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,qBAAA,GAAOA,kBAAAA,CAAP,QAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAOA,qBAAAA,CAAAA,IAAAA,CAAAA,mBAAAA,EAAP,EAAOA,CAAP;AACF,WAAA,CAAA,QAAA,GAAA,MAAA,MAAA,IAAA,IAAA,QAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,kBAAA,GAAOA,QAAAA,CAAP,SAAA,MAAA,IAAA,IAAA,kBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAA,qBAAA,GAAOA,kBAAAA,CAAP,QAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAOA,qBAAAA,CAAAA,IAAAA,CAAP,mBAAOA,CAAP;AALJ,GAAsE,CAAtE;AASA,GAAA,GAAA,MAAA,CAAA,SAAA,EAAU,MAAM;AACd,QAAA,gBAAA,EAAsBD,MAAM;AAD9B,GAAA,EAEG,CAFH,gBAEG,CAFH;AAIA,MAAA,qBAAA,EACEE,OAAO,CAAPA,KAAAA,CAAe,4BAA2BC,qBAA5B,KAAA,IAA4BA,IAAAA,qBAA5B,KAAA,KAAA,CAA4BA,GAA5B,KAAA,CAA4BA,GAAAA,qBAAqB,CAAEC,OAAjEF,EAAAA;AAEF,SAAA,aAAA;AACD","sourcesContent":["import { useSWR, useConfluxJSDefined } from \"./\";\nimport { useEffect } from \"react\";\n\nconst GET_CLIENT_VERSION_SWR_ID = \"GET_CLIENT_VERSION_SWR_ID\";\n\nexport default function useClientVersion() {\n  const confluxJSDefined = useConfluxJSDefined();\n\n  const { data: clientVersion, error: getClientVersionError, mutate } = useSWR(\n    confluxJSDefined ? GET_CLIENT_VERSION_SWR_ID : null,\n    () => {\n      if (typeof window?.confluxJS?.provider?.send === \"function\")\n        return window?.confluxJS?.provider?.send(\"cfx_clientVersion\", []);\n      return window?.confluxJS?.provider?.call(\"cfx_clientVersion\");\n    }\n  );\n\n  useEffect(() => {\n    if (confluxJSDefined) mutate();\n  }, [confluxJSDefined]);\n\n  if (getClientVersionError)\n    console.error(`Error get clientVersion: ${getClientVersionError?.message}`);\n\n  return clientVersion;\n}\n"]},"metadata":{},"sourceType":"script"}
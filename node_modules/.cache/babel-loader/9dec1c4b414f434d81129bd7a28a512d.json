{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useIdleSWR;\nexports.useEpochNumberSWR = useEpochNumberSWR;\n\nvar _swr = _interopRequireDefault(require(\"swr\"));\n\nvar _reactUse = require(\"react-use\");\n\nvar _ = require(\"./\");\n\nvar _react = require(\"react\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction useIdleSWR(...args) {\n  const [key, ...rest] = args;\n  let idleDelay = 300e3;\n  if (args[1] && args[1].idleDelay) idleDelay = args[1].idleDelay;\n  if (args[2] && args[2].idleDelay) idleDelay = args[2].idleDelay;\n  return (0, _swr.default)((0, _reactUse.useIdle)(idleDelay) ? null : key, ...rest);\n}\n\nfunction useEpochNumberSWR(...args) {\n  const confluxJSDefined = (0, _.useConfluxJSDefined)();\n  const [key, ...rest] = args;\n  const swrRst = useIdleSWR(confluxJSDefined ? key : null, ...rest);\n  (0, _react.useEffect)(() => {\n    swrRst.mutate();\n  }, [confluxJSDefined]);\n  (0, _reactUse.useEvent)(\"epochNumberUpdated\", () => swrRst.mutate());\n  return swrRst;\n}","map":{"version":3,"sources":["../src/swr.js"],"names":["idleDelay","args","confluxJSDefined","swrRst","useIdleSWR"],"mappings":";;;;;;;;AAAA,IAAA,IAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,KAAA,CAAA,CAAA;;AACA,IAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,IAAA,CAAA,GAAA,OAAA,CAAA,IAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;;;;;;;AAEe,SAAA,UAAA,CAAoB,GAApB,IAAA,EAA6B;AAC1C,QAAM,CAAA,GAAA,EAAM,GAAN,IAAA,IAAN,IAAA;AACA,MAAIA,SAAS,GAAb,KAAA;AACA,MAAIC,IAAI,CAAJA,CAAI,CAAJA,IAAWA,IAAI,CAAJA,CAAI,CAAJA,CAAf,SAAA,EAAkCD,SAAS,GAAGC,IAAI,CAAJA,CAAI,CAAJA,CAAZD,SAAAA;AAClC,MAAIC,IAAI,CAAJA,CAAI,CAAJA,IAAWA,IAAI,CAAJA,CAAI,CAAJA,CAAf,SAAA,EAAkCD,SAAS,GAAGC,IAAI,CAAJA,CAAI,CAAJA,CAAZD,SAAAA;AAClC,SAAO,CAAA,GAAA,IAAA,CAAA,OAAA,EAAO,CAAA,GAAA,SAAA,CAAA,OAAA,EAAA,SAAA,IAAA,IAAA,GAAP,GAAA,EAAwC,GAA/C,IAAO,CAAP;AACD;;AAEM,SAAA,iBAAA,CAA2B,GAA3B,IAAA,EAAoC;AACzC,QAAME,gBAAgB,GAAG,CAAA,GAAA,CAAA,CAAzB,mBAAyB,GAAzB;AACA,QAAM,CAAA,GAAA,EAAM,GAAN,IAAA,IAAN,IAAA;AACA,QAAMC,MAAM,GAAGC,UAAU,CAACF,gBAAgB,GAAA,GAAA,GAAjB,IAAA,EAAgC,GAAzD,IAAyB,CAAzB;AACA,GAAA,GAAA,MAAA,CAAA,SAAA,EAAU,MAAM;AACdC,IAAAA,MAAM,CAANA,MAAAA;AADF,GAAA,EAEG,CAFH,gBAEG,CAFH;AAGA,GAAA,GAAA,SAAA,CAAA,QAAA,EAAA,oBAAA,EAA+B,MAAMA,MAAM,CAA3C,MAAqCA,EAArC;AACA,SAAA,MAAA;AACD","sourcesContent":["import useSWR from \"swr\";\nimport { useIdle, useEvent } from \"react-use\";\nimport { useConfluxJSDefined } from \"./\";\nimport { useEffect } from \"react\";\n\nexport default function useIdleSWR(...args) {\n  const [key, ...rest] = args;\n  let idleDelay = 300e3;\n  if (args[1] && args[1].idleDelay) idleDelay = args[1].idleDelay;\n  if (args[2] && args[2].idleDelay) idleDelay = args[2].idleDelay;\n  return useSWR(useIdle(idleDelay) ? null : key, ...rest);\n}\n\nexport function useEpochNumberSWR(...args) {\n  const confluxJSDefined = useConfluxJSDefined();\n  const [key, ...rest] = args;\n  const swrRst = useIdleSWR(confluxJSDefined ? key : null, ...rest);\n  useEffect(() => {\n    swrRst.mutate();\n  }, [confluxJSDefined]);\n  useEvent(\"epochNumberUpdated\", () => swrRst.mutate());\n  return swrRst;\n}\n"]},"metadata":{},"sourceType":"script"}
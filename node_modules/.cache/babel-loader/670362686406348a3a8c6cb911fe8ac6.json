{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useChainNetId;\nexports.UPDATE_NETWORKID_SWR_ID = exports.UPDATE_CHAINID_SWR_ID = void 0;\n\nvar _ = require(\"./\");\n\nvar _reactUse = require(\"react-use\");\n\nvar _react = require(\"react\");\n\nconst UPDATE_CHAINID_SWR_ID = \"UPDATE_CHAINID_SWR_ID\";\nexports.UPDATE_CHAINID_SWR_ID = UPDATE_CHAINID_SWR_ID;\nconst UPDATE_NETWORKID_SWR_ID = \"UPDATE_NETWORKID_SWR_ID\";\nexports.UPDATE_NETWORKID_SWR_ID = UPDATE_NETWORKID_SWR_ID;\n\nfunction useChainNetId() {\n  var _window, _window$conflux, _window2, _window2$conflux;\n\n  (0, _.useConfluxJSDefined)();\n  const [chainId, setChainId] = (0, _react.useState)((_window = window) === null || _window === void 0 ? void 0 : (_window$conflux = _window.conflux) === null || _window$conflux === void 0 ? void 0 : _window$conflux.chainId);\n  const [networkId, setNetworkId] = (0, _react.useState)(parseInt((_window2 = window) === null || _window2 === void 0 ? void 0 : (_window2$conflux = _window2.conflux) === null || _window2$conflux === void 0 ? void 0 : _window2$conflux.networkVersion, 10) || null);\n  (0, _reactUse.useEffectOnce)(() => {\n    var _window3, _window3$conflux, _window4, _window4$conflux;\n\n    const chainListener = chainId => {\n      setChainId(chainId);\n    };\n\n    const networkListener = networkId => {\n      setNetworkId(parseInt(networkId, 10) || null);\n    };\n\n    (_window3 = window) === null || _window3 === void 0 ? void 0 : (_window3$conflux = _window3.conflux) === null || _window3$conflux === void 0 ? void 0 : _window3$conflux.on(\"chainIdChanged\", chainListener);\n    (_window4 = window) === null || _window4 === void 0 ? void 0 : (_window4$conflux = _window4.conflux) === null || _window4$conflux === void 0 ? void 0 : _window4$conflux.on(\"networkChanged\", networkListener);\n    return () => {\n      var _window5, _window5$conflux, _window6, _window6$conflux;\n\n      (_window5 = window) === null || _window5 === void 0 ? void 0 : (_window5$conflux = _window5.conflux) === null || _window5$conflux === void 0 ? void 0 : _window5$conflux.off(\"chainIdChanged\", chainListener);\n      (_window6 = window) === null || _window6 === void 0 ? void 0 : (_window6$conflux = _window6.conflux) === null || _window6$conflux === void 0 ? void 0 : _window6$conflux.off(\"networkChanged\", networkListener);\n    };\n  });\n  return {\n    chainId,\n    networkId\n  };\n}","map":{"version":3,"sources":["../src/useChainNetId.js"],"names":["UPDATE_CHAINID_SWR_ID","UPDATE_NETWORKID_SWR_ID","window","parseInt","chainListener","chainId","setChainId","networkListener","networkId","setNetworkId"],"mappings":"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","sourcesContent":["import { useConfluxJSDefined } from \"./\";\nimport { useEffectOnce } from \"react-use\";\nimport { useState } from \"react\";\n\nexport const UPDATE_CHAINID_SWR_ID = \"UPDATE_CHAINID_SWR_ID\";\nexport const UPDATE_NETWORKID_SWR_ID = \"UPDATE_NETWORKID_SWR_ID\";\n\nexport default function useChainNetId() {\n  useConfluxJSDefined();\n\n  const [chainId, setChainId] = useState(window?.conflux?.chainId);\n  const [networkId, setNetworkId] = useState(parseInt(window?.conflux?.networkVersion ,10) || null);\n\n  useEffectOnce(() => {\n    const chainListener = (chainId) => {\n      setChainId(chainId);\n    };\n    const networkListener = (networkId) => {\n      setNetworkId(parseInt(networkId, 10) || null);\n    };\n    window?.conflux?.on(\"chainIdChanged\", chainListener);\n    window?.conflux?.on(\"networkChanged\", networkListener);\n    return () => {\n      window?.conflux?.off(\"chainIdChanged\", chainListener);\n      window?.conflux?.off(\"networkChanged\", networkListener);\n    };\n })\n\n  return {chainId, networkId}\n}"]},"metadata":{},"sourceType":"script"}
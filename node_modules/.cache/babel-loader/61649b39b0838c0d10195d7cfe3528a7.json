{"ast":null,"code":"import { useRef as e, useState as n, useEffect as t, useCallback as o } from \"react\";\nimport r from \"@use-it/event-listener\";\n\nvar l = {},\n    a = function (e, n, t) {\n  return l[e] || (l[e] = {\n    callbacks: [],\n    value: t\n  }), l[e].callbacks.push(n), {\n    deregister: function () {\n      var t = l[e].callbacks,\n          o = t.indexOf(n);\n      o > -1 && t.splice(o, 1);\n    },\n    emit: function (t) {\n      l[e].value !== t && (l[e].value = t, l[e].callbacks.forEach(function (e) {\n        n !== e && e(t);\n      }));\n    }\n  };\n};\n\nexport default function (l, u) {\n  if (void 0 === u && (u = \"undefined\" != typeof global && global.localStorage ? global.localStorage : \"undefined\" != typeof globalThis && globalThis.localStorage ? globalThis.localStorage : \"undefined\" != typeof window && window.localStorage ? window.localStorage : \"undefined\" != typeof localStorage ? localStorage : null), u) {\n    var i = function (e) {\n      return {\n        get: function (n, t) {\n          var o = e.getItem(n);\n          return null == o ? \"function\" == typeof t ? t() : t : JSON.parse(o);\n        },\n        set: function (n, t) {\n          e.setItem(n, JSON.stringify(t));\n        }\n      };\n    }(u);\n\n    return function (u) {\n      return function (l, u, i) {\n        var c = i.get,\n            f = i.set,\n            g = e(null),\n            s = n(function () {\n          return c(u, l);\n        }),\n            d = s[0],\n            p = s[1];\n        r(\"storage\", function (e) {\n          if (e.key === u) {\n            var n = JSON.parse(e.newValue);\n            d !== n && p(n);\n          }\n        }), t(function () {\n          return g.current = a(u, p, l), function () {\n            g.current.deregister();\n          };\n        }, [l, u]);\n        var v = o(function (e) {\n          var n = \"function\" == typeof e ? e(d) : e;\n          f(u, n), p(n), g.current.emit(e);\n        }, [d, f, u]);\n        return [d, v];\n      }(u, l, i);\n    };\n  }\n\n  return n;\n}","map":{"version":3,"sources":["/Users/alice/Documents/rigel/node_modules/use-persisted-state/dist/use-persisted-state.m.js"],"names":["useRef","e","useState","n","useEffect","t","useCallback","o","r","l","a","callbacks","value","push","deregister","indexOf","splice","emit","forEach","u","global","localStorage","globalThis","window","i","get","getItem","JSON","parse","set","setItem","stringify","c","f","g","s","d","p","key","newValue","current","v"],"mappings":"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","sourcesContent":["import{useRef as e,useState as n,useEffect as t,useCallback as o}from\"react\";import r from\"@use-it/event-listener\";var l={},a=function(e,n,t){return l[e]||(l[e]={callbacks:[],value:t}),l[e].callbacks.push(n),{deregister:function(){var t=l[e].callbacks,o=t.indexOf(n);o>-1&&t.splice(o,1)},emit:function(t){l[e].value!==t&&(l[e].value=t,l[e].callbacks.forEach(function(e){n!==e&&e(t)}))}}};export default function(l,u){if(void 0===u&&(u=\"undefined\"!=typeof global&&global.localStorage?global.localStorage:\"undefined\"!=typeof globalThis&&globalThis.localStorage?globalThis.localStorage:\"undefined\"!=typeof window&&window.localStorage?window.localStorage:\"undefined\"!=typeof localStorage?localStorage:null),u){var i=function(e){return{get:function(n,t){var o=e.getItem(n);return null==o?\"function\"==typeof t?t():t:JSON.parse(o)},set:function(n,t){e.setItem(n,JSON.stringify(t))}}}(u);return function(u){return function(l,u,i){var c=i.get,f=i.set,g=e(null),s=n(function(){return c(u,l)}),d=s[0],p=s[1];r(\"storage\",function(e){if(e.key===u){var n=JSON.parse(e.newValue);d!==n&&p(n)}}),t(function(){return g.current=a(u,p,l),function(){g.current.deregister()}},[l,u]);var v=o(function(e){var n=\"function\"==typeof e?e(d):e;f(u,n),p(n),g.current.emit(e)},[d,f,u]);return[d,v]}(u,l,i)}}return n}\n"]},"metadata":{},"sourceType":"module"}